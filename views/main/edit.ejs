<% layout('layouts/layout') -%>
<div class="container">
    <form class="row col-8 mx-auto p-4 needs-validation" novalidate enctype="multipart/form-data" action="/campgrounds/<%= ground._id %>?_method=patch" method="post">
        
        <!-- Name -->
        <div class="mb-3 col-12">
            <label for="name" class="form-label">Name</label>
            <input type="text" class="form-control" name="name" id="name" value="<%= ground.name %>" required>
            <div class="invalid-feedback">Please provide a valid name.</div>
        </div>
        
        <!-- Location -->
        <div class="mb-3 col-12">
            <label for="location" class="form-label">Location</label>
            <input type="text" class="form-control" name="location" id="location" value="<%= ground.location %>" required>
            <div class="invalid-feedback">Please provide a valid location.</div>
        </div>
        
        <!-- Image Upload -->
        <div class="mb-3 col-12">
            <label for="image" class="form-label">Upload Images</label>
            <input type="file" class="form-control" name="image" id="image" multiple>
            <div class="valid-feedback">Looks good!</div>
            <div class="invalid-feedback">Please upload an image.</div>
        </div>
        
        <!-- Price -->
        <div class="mb-3 col-12">
            <label for="price" class="form-label">Price per Night</label>
            <input type="number" class="form-control" name="price" id="price" min="1" max="99" value="<%= ground.price %>" required>
            <div class="invalid-feedback">Please enter a valid price.</div>
        </div>
        
        <!-- Description -->
        <div class="mb-3 col-12">
            <label for="description" class="form-label">Description</label>
            <textarea class="form-control" name="description" id="description" rows="5" required><%= ground.description %></textarea>
            <div class="invalid-feedback">Please provide a description.</div>
        </div>
        
        <!-- Existing Images -->
        <div class="mb-3">
            <h6>Current Images</h6>
            <% ground.image.forEach((img,i) => { %>
                <img src="<%= img.thumbnail %>" alt="Campground Image" class="img-thumbnail mb-2" style="max-width: 100px; max-height: 100px;">
                <input type="checkbox" name="deleteImage[]" id="image-<%i%>" value="<%= img.filename %>">
            <% }) %>
        </div>

        <!-- Submit Button -->
        <div class="col-12 text-center">
            <button type="submit" class="btn btn-primary col-4">Submit Changes</button>
        </div>
    </form>

    <!-- Back Button -->
    <div class="text-center mt-3">
        <a class="btn btn-secondary col-4" href="/campgrounds/<%= ground._id %>">Back to Campground</a>
    </div>
</div>

